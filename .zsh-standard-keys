bindkey '^H' backward-delete-char
bindkey '^?' backward-delete-char

function bindkey-all
{
    bindkey -M emacs "$@"
    bindkey -M viins "$@"
    bindkey -M vicmd "$@"
}

bindkey-all '^[[H' vi-beginning-of-line
bindkey-all '^[[F' vi-end-of-line

bindkey-all '^[[5~' beginning-of-buffer
bindkey-all '^[[6~' end-of-buffer

zle -N beginning-of-buffer
zle -N end-of-buffer
function beginning-of-buffer()
{
    case $LBUFFER in *$'\n'*)
        zle beginning-of-buffer-or-history
        return
    esac
    zle beginning-of-line
}
function end-of-buffer()
{
    case $RBUFFER in *$'\n'*)
        zle end-of-buffer-or-history
        return
    esac
    zle end-of-line
}
